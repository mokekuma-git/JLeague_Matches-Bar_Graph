<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>J Points (TypeScript dev)</title>
  <!-- SortableTable from CDN (same as production j_points.html) -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@riversun/sortable-table/lib/sortable-table.js"></script>
  <!-- publicDir=docs/ in dev mode, so these paths resolve to docs/*.css -->
  <link rel="stylesheet" href="/j_points.css">
  <link rel="stylesheet" href="/team_style.css">
  <script type="module" crossorigin src="/assets/j_points-DVzalpZB.js"></script>
</head>
<body>

<section id="controls" style="margin:1em; display:flex; gap:1.5em; flex-wrap:wrap; align-items:center;">
  <label>
    カテゴリ:
    <select id="category_key">
      <option value="1">J1</option>
      <option value="2">J2</option>
      <option value="3">J3</option>
    </select>
  </label>
  <label>
    シーズン:
    <select id="season_key"></select>
  </label>
  <label>
    表示日:
    <input type="date" id="target_date">
  </label>
  <label>
    チームソート:
    <select id="team_sort_key">
      <option value="point">勝点(最新)</option>
      <option value="disp_point">勝点(表示時)</option>
      <option value="avlbl_pt">最大勝点(最新)</option>
      <option value="disp_avlbl_pt">最大勝点(表示時)</option>
    </select>
  </label>
  <label>
    試合ソート:
    <select id="match_sort_key">
      <option value="new_bottom" selected>新しい試合が下</option>
      <option value="old_bottom">古い試合が下</option>
      <option value="first_bottom">第1節が下</option>
      <option value="last_bottom">最終節が下</option>
    </select>
  </label>
  <span id="status_msg" style="color:#666; font-size:0.9em;"></span>
</section>

<!-- Date slider -->
<section id="date_slider_section" style="margin:0.5em 1em; display:flex; gap:0.5em; align-items:center; flex-wrap:wrap;">
  <span id="pre_date_slider">開幕前</span>
  <button id="date_slider_down">＜</button>
  <input type="range" id="date_slider" min="0" max="0" step="1" value="0" style="width:300px;"/>
  <button id="date_slider_up">＞</button>
  <span id="post_date_slider"></span>
  [<span id="target_date_display"></span>]
  <button id="reset_date_slider">最新にリセット</button>
</section>

<!-- Appearance controls -->
<section id="appearance_controls" style="margin:0.5em 1em; display:flex; gap:1.5em; align-items:center; flex-wrap:wrap;">
  <label>
    グラフ縮小:
    <input type="range" id="scale_slider" min="0.1" max="1" step="0.1" value="1"/>
    <span id="current_scale">1</span>倍
  </label>
  <label>
    未実施透明度:
    <input type="range" id="future_opacity" min="0" max="0.5" step="0.01" value="0.1"/>
    [<span id="current_opacity"></span>]
  </label>
  <label>
    余白色:
    <input type="color" id="space_color" value="#000000"/>
  </label>
</section>

<!-- Bar graph container -->
<div id="box_container"></div>

<!-- Hidden .short div for HEIGHT_UNIT calculation (matches production j_points.html) -->
<div class="short" style="display:none;"></div>

<section id="ranktable_section" style="margin:1em;">
  <div class="sortable-table">
    <table id="ranktable" class="ranktable">
      <thead>
        <tr>
          <th data-id="rank" sortable></th>
          <th data-id="name">チーム</th>
          <th data-id="all_game" sortable>試合</th>
          <th data-id="point" sortable>勝点</th>
          <th data-id="avrg_pt" sortable>平均</th>
          <th data-id="avlbl_pt" sortable>最大</th>
          <th data-id="win" sortable>勝</th>
          <th data-id="pk_win" sortable>PK勝</th>
          <th data-id="pk_loss" sortable>PK負</th>
          <th data-id="draw" sortable>分</th>
          <th data-id="lose" sortable>負</th>
          <th data-id="goal_get" sortable>得点</th>
          <th data-id="goal_lose" sortable>失点</th>
          <th data-id="goal_diff" sortable>点差</th>
          <th data-id="future_game" sortable>残り</th>
          <th data-id="champion" sortable>優勝</th>
          <th data-id="promotion" sortable>昇格<br/>ACL</th>
          <th data-id="relegation" sortable>残留</th>
        </tr>
      </thead>
    </table>
  </div>
</section>

</body>
</html>
