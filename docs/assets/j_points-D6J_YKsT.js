(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();function Ve(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ke={exports:{}};var Ze=ke.exports,Fe;function Xe(){return Fe||(Fe=1,(function(e,s){((i,t)=>{e.exports=t()})(Ze,function i(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},l,o=!t.document&&!!t.postMessage,u=t.IS_PAPA_WORKER||!1,h={},k=0,a={};function _(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var c=de(n);c.chunkSize=parseInt(c.chunkSize),n.step||n.chunk||(c.chunkSize=null),this._handle=new q(c),(this._handle.streamer=this)._config=c}).call(this,r),this.parseChunk=function(n,c){var f=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<f){let y=this._config.newline;y||(d=this._config.quoteChar||'"',y=this._handle.guessLineEndings(n,d)),n=[...n.split(y).slice(f)].join(y)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(d=this._config.beforeFirstChunk(n))!==void 0&&(n=d),this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+n,d=(this._partialLine="",this._handle.parse(f,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=d.meta.cursor,f=(this._finished||(this._partialLine=f.substring(n-this._baseIndex),this._baseIndex=n),d&&d.data&&(this._rowCount+=d.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)t.postMessage({results:d,workerId:a.WORKER_ID,finished:f});else if(B(this._config.chunk)&&!c){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=d=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!f||!B(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),f||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(n){B(this._config.error)?this._config.error(n):u&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:n,finished:!1})}}function I(r){var n;(r=r||{}).chunkSize||(r.chunkSize=a.RemoteChunkSize),_.call(this,r),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),o||(n.onload=se(this._chunkLoaded,this),n.onerror=se(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var c,f=this._config.downloadRequestHeaders;for(c in f)n.setRequestHeader(c,f[c])}var d;this._config.chunkSize&&(d=this._start+this._config.chunkSize-1,n.setRequestHeader("Range","bytes="+this._start+"-"+d));try{n.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}o&&n.status===0&&this._chunkError()}},this._chunkLoaded=function(){n.readyState===4&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize||n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(c=>(c=c.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1)(n),this.parseChunk(n.responseText)))},this._chunkError=function(c){c=n.statusText||c,this._sendError(new Error(c))}}function z(r){(r=r||{}).chunkSize||(r.chunkSize=a.LocalChunkSize),_.call(this,r);var n,c,f=typeof FileReader<"u";this.stream=function(d){this._input=d,c=d.slice||d.webkitSlice||d.mozSlice,f?((n=new FileReader).onload=se(this._chunkLoaded,this),n.onerror=se(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var d=this._input,y=(this._config.chunkSize&&(y=Math.min(this._start+this._config.chunkSize,this._input.size),d=c.call(d,this._start,y)),n.readAsText(d,this._config.encoding));f||this._chunkLoaded({target:{result:y}})},this._chunkLoaded=function(d){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(d.target.result)},this._chunkError=function(){this._sendError(n.error)}}function $(r){var n;_.call(this,r=r||{}),this.stream=function(c){return n=c,this._nextChunk()},this._nextChunk=function(){var c,f;if(!this._finished)return c=this._config.chunkSize,n=c?(f=n.substring(0,c),n.substring(c)):(f=n,""),this._finished=!n,this.parseChunk(f)}}function O(r){_.call(this,r=r||{});var n=[],c=!0,f=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(d){this._input=d,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){f&&n.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):c=!0},this._streamData=se(function(d){try{n.push(typeof d=="string"?d:d.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(y){this._streamError(y)}},this),this._streamError=se(function(d){this._streamCleanUp(),this._sendError(d)},this),this._streamEnd=se(function(){this._streamCleanUp(),f=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function q(r){var n,c,f,d,y=Math.pow(2,53),j=-y,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,U=0,g=0,Z=!1,v=!1,C=[],p={data:[],errors:[],meta:{}};function W(x){return r.skipEmptyLines==="greedy"?x.join("").trim()==="":x.length===1&&x[0].length===0}function N(){if(p&&f&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),f=!1),r.skipEmptyLines&&(p.data=p.data.filter(function(P){return!W(P)})),Q()){let P=function(J,M){B(r.transformHeader)&&(J=r.transformHeader(J,M)),C.push(J)};var E=P;if(p)if(Array.isArray(p.data[0])){for(var x=0;Q()&&x<p.data.length;x++)p.data[x].forEach(P);p.data.splice(0,1)}else p.data.forEach(P)}function R(P,J){for(var M=r.header?{}:[],A=0;A<P.length;A++){var w=A,X=P[A],X=((T,F)=>(H=>(r.dynamicTypingFunction&&r.dynamicTyping[H]===void 0&&(r.dynamicTyping[H]=r.dynamicTypingFunction(H)),(r.dynamicTyping[H]||r.dynamicTyping)===!0))(T)?F==="true"||F==="TRUE"||F!=="false"&&F!=="FALSE"&&((H=>{if(V.test(H)&&(H=parseFloat(H),j<H&&H<y))return 1})(F)?parseFloat(F):ne.test(F)?new Date(F):F===""?null:F):F)(w=r.header?A>=C.length?"__parsed_extra":C[A]:w,X=r.transform?r.transform(X,w):X);w==="__parsed_extra"?(M[w]=M[w]||[],M[w].push(X)):M[w]=X}return r.header&&(A>C.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+A,g+J):A<C.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+A,g+J)),M}var K;p&&(r.header||r.dynamicTyping||r.transform)&&(K=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(R),K=p.data.length):p.data=R(p.data,0),r.header&&p.meta&&(p.meta.fields=C),g+=K)}function Q(){return r.header&&C.length===0}function re(x,R,K,E){x={type:x,code:R,message:K},E!==void 0&&(x.row=E),p.errors.push(x)}B(r.step)&&(d=r.step,r.step=function(x){p=x,Q()?N():(N(),p.data.length!==0&&(U+=x.data.length,r.preview&&U>r.preview?c.abort():(p.data=p.data[0],d(p,S))))}),this.parse=function(x,R,K){var E=r.quoteChar||'"',E=(r.newline||(r.newline=this.guessLineEndings(x,E)),f=!1,r.delimiter?B(r.delimiter)&&(r.delimiter=r.delimiter(x),p.meta.delimiter=r.delimiter):((E=((P,J,M,A,w)=>{var X,T,F,H;w=w||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var fe=0;fe<w.length;fe++){for(var oe,_e=w[fe],D=0,ae=0,G=0,te=(F=void 0,new m({comments:A,delimiter:_e,newline:J,preview:10}).parse(P)),ce=0;ce<te.data.length;ce++)M&&W(te.data[ce])?G++:(oe=te.data[ce].length,ae+=oe,F===void 0?F=oe:0<oe&&(D+=Math.abs(oe-F),F=oe));0<te.data.length&&(ae/=te.data.length-G),(T===void 0||D<=T)&&(H===void 0||H<ae)&&1.99<ae&&(T=D,X=_e,H=ae)}return{successful:!!(r.delimiter=X),bestDelimiter:X}})(x,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess)).successful?r.delimiter=E.bestDelimiter:(f=!0,r.delimiter=a.DefaultDelimiter),p.meta.delimiter=r.delimiter),de(r));return r.preview&&r.header&&E.preview++,n=x,c=new m(E),p=c.parse(n,R,K),N(),Z?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,c.abort(),n=B(r.chunk)?"":n.substring(c.getCharIndex())},this.resume=function(){S.streamer._halted?(Z=!1,S.streamer.parseChunk(n,!0)):setTimeout(S.resume,3)},this.aborted=function(){return v},this.abort=function(){v=!0,c.abort(),p.meta.aborted=!0,B(r.complete)&&r.complete(p),n=""},this.guessLineEndings=function(P,E){P=P.substring(0,1048576);var E=new RegExp(b(E)+"([^]*?)"+b(E),"gm"),K=(P=P.replace(E,"")).split("\r"),E=P.split(`
`),P=1<E.length&&E[0].length<K[0].length;if(K.length===1||P)return`
`;for(var J=0,M=0;M<K.length;M++)K[M][0]===`
`&&J++;return J>=K.length/2?`\r
`:"\r"}}function b(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(r){var n=(r=r||{}).delimiter,c=r.newline,f=r.comments,d=r.step,y=r.preview,j=r.fastMode,V=null,ne=!1,S=r.quoteChar==null?'"':r.quoteChar,U=S;if(r.escapeChar!==void 0&&(U=r.escapeChar),(typeof n!="string"||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),f===n)throw new Error("Comment character same as delimiter");f===!0?f="#":(typeof f!="string"||-1<a.BAD_DELIMITERS.indexOf(f))&&(f=!1),c!==`
`&&c!=="\r"&&c!==`\r
`&&(c=`
`);var g=0,Z=!1;this.parse=function(v,C,p){if(typeof v!="string")throw new Error("Input must be a string");var W=v.length,N=n.length,Q=c.length,re=f.length,x=B(d),R=[],K=[],E=[],P=g=0;if(!v)return D();if(j||j!==!1&&v.indexOf(S)===-1){for(var J=v.split(c),M=0;M<J.length;M++){if(E=J[M],g+=E.length,M!==J.length-1)g+=c.length;else if(p)return D();if(!f||E.substring(0,re)!==f){if(x){if(R=[],H(E.split(n)),ae(),Z)return D()}else H(E.split(n));if(y&&y<=M)return R=R.slice(0,y),D(!0)}}return D()}for(var A=v.indexOf(n,g),w=v.indexOf(c,g),X=new RegExp(b(U)+b(S),"g"),T=v.indexOf(S,g);;)if(v[g]===S)for(T=g,g++;;){if((T=v.indexOf(S,T+1))===-1)return p||K.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:R.length,index:g}),oe();if(T===W-1)return oe(v.substring(g,T).replace(X,S));if(S===U&&v[T+1]===U)T++;else if(S===U||T===0||v[T-1]!==U){A!==-1&&A<T+1&&(A=v.indexOf(n,T+1));var F=fe((w=w!==-1&&w<T+1?v.indexOf(c,T+1):w)===-1?A:Math.min(A,w));if(v.substr(T+1+F,N)===n){E.push(v.substring(g,T).replace(X,S)),v[g=T+1+F+N]!==S&&(T=v.indexOf(S,g)),A=v.indexOf(n,g),w=v.indexOf(c,g);break}if(F=fe(w),v.substring(T+1+F,T+1+F+Q)===c){if(E.push(v.substring(g,T).replace(X,S)),_e(T+1+F+Q),A=v.indexOf(n,g),T=v.indexOf(S,g),x&&(ae(),Z))return D();if(y&&R.length>=y)return D(!0);break}K.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:R.length,index:g}),T++}}else if(f&&E.length===0&&v.substring(g,g+re)===f){if(w===-1)return D();g=w+Q,w=v.indexOf(c,g),A=v.indexOf(n,g)}else if(A!==-1&&(A<w||w===-1))E.push(v.substring(g,A)),g=A+N,A=v.indexOf(n,g);else{if(w===-1)break;if(E.push(v.substring(g,w)),_e(w+Q),x&&(ae(),Z))return D();if(y&&R.length>=y)return D(!0)}return oe();function H(G){R.push(G),P=g}function fe(G){var te=0;return te=G!==-1&&(G=v.substring(T+1,G))&&G.trim()===""?G.length:te}function oe(G){return p||(G===void 0&&(G=v.substring(g)),E.push(G),g=W,H(E),x&&ae()),D()}function _e(G){g=G,H(E),E=[],w=v.indexOf(c,g)}function D(G){if(r.header&&!C&&R.length&&!ne){var te=R[0],ce=Object.create(null),xe=new Set(te);let Pe=!1;for(let pe=0;pe<te.length;pe++){let le=te[pe];if(ce[le=B(r.transformHeader)?r.transformHeader(le,pe):le]){let ge,Me=ce[le];for(;ge=le+"_"+Me,Me++,xe.has(ge););xe.add(ge),te[pe]=ge,ce[le]++,Pe=!0,(V=V===null?{}:V)[ge]=le}else ce[le]=1,te[pe]=le;xe.add(le)}Pe&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:R,errors:K,meta:{delimiter:n,linebreak:c,aborted:Z,truncated:!!G,cursor:P+(C||0),renamedHeaders:V}}}function ae(){d(D()),R=[],K=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return g}}function L(r){var n=r.data,c=h[n.workerId],f=!1;if(n.error)c.userError(n.error,n.file);else if(n.results&&n.results.data){var d={abort:function(){f=!0,Y(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ie,resume:ie};if(B(c.userStep)){for(var y=0;y<n.results.data.length&&(c.userStep({data:n.results.data[y],errors:n.results.errors,meta:n.results.meta},d),!f);y++);delete n.results}else B(c.userChunk)&&(c.userChunk(n.results,d,n.file),delete n.results)}n.finished&&!f&&Y(n.workerId,n.results)}function Y(r,n){var c=h[r];B(c.userComplete)&&c.userComplete(n),c.terminate(),delete h[r]}function ie(){throw new Error("Not implemented.")}function de(r){if(typeof r!="object"||r===null)return r;var n,c=Array.isArray(r)?[]:{};for(n in r)c[n]=de(r[n]);return c}function se(r,n){return function(){r.apply(n,arguments)}}function B(r){return typeof r=="function"}return a.parse=function(r,n){var c=(n=n||{}).dynamicTyping||!1;if(B(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!B(n.transform)&&n.transform,!n.worker||!a.WORKERS_SUPPORTED)return c=null,a.NODE_STREAM_INPUT,typeof r=="string"?(r=(f=>f.charCodeAt(0)!==65279?f:f.slice(1))(r),c=new(n.download?I:$)(n)):r.readable===!0&&B(r.read)&&B(r.on)?c=new O(n):(t.File&&r instanceof File||r instanceof Object)&&(c=new z(n)),c.stream(r);(c=(()=>{var f;return!!a.WORKERS_SUPPORTED&&(f=(()=>{var d=t.URL||t.webkitURL||null,y=i.toString();return a.BLOB_URL||(a.BLOB_URL=d.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",y,")();"],{type:"text/javascript"})))})(),(f=new t.Worker(f)).onmessage=L,f.id=k++,h[f.id]=f)})()).userStep=n.step,c.userChunk=n.chunk,c.userComplete=n.complete,c.userError=n.error,n.step=B(n.step),n.chunk=B(n.chunk),n.complete=B(n.complete),n.error=B(n.error),delete n.worker,c.postMessage({input:r,config:n,workerId:c.id})},a.unparse=function(r,n){var c=!1,f=!0,d=",",y=`\r
`,j='"',V=j+j,ne=!1,S=null,U=!1,g=((()=>{if(typeof n=="object"){if(typeof n.delimiter!="string"||a.BAD_DELIMITERS.filter(function(C){return n.delimiter.indexOf(C)!==-1}).length||(d=n.delimiter),typeof n.quotes!="boolean"&&typeof n.quotes!="function"&&!Array.isArray(n.quotes)||(c=n.quotes),typeof n.skipEmptyLines!="boolean"&&typeof n.skipEmptyLines!="string"||(ne=n.skipEmptyLines),typeof n.newline=="string"&&(y=n.newline),typeof n.quoteChar=="string"&&(j=n.quoteChar),typeof n.header=="boolean"&&(f=n.header),Array.isArray(n.columns)){if(n.columns.length===0)throw new Error("Option columns is empty");S=n.columns}n.escapeChar!==void 0&&(V=n.escapeChar+j),n.escapeFormulae instanceof RegExp?U=n.escapeFormulae:typeof n.escapeFormulae=="boolean"&&n.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(j),"g"));if(typeof r=="string"&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return Z(null,r,ne);if(typeof r[0]=="object")return Z(S||Object.keys(r[0]),r,ne)}else if(typeof r=="object")return typeof r.data=="string"&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||S),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:typeof r.data[0]=="object"?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||typeof r.data[0]=="object"||(r.data=[r.data])),Z(r.fields||[],r.data||[],ne);throw new Error("Unable to serialize unrecognized input");function Z(C,p,W){var N="",Q=(typeof C=="string"&&(C=JSON.parse(C)),typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(C)&&0<C.length),re=!Array.isArray(p[0]);if(Q&&f){for(var x=0;x<C.length;x++)0<x&&(N+=d),N+=v(C[x],x);0<p.length&&(N+=y)}for(var R=0;R<p.length;R++){var K=(Q?C:p[R]).length,E=!1,P=Q?Object.keys(p[R]).length===0:p[R].length===0;if(W&&!Q&&(E=W==="greedy"?p[R].join("").trim()==="":p[R].length===1&&p[R][0].length===0),W==="greedy"&&Q){for(var J=[],M=0;M<K;M++){var A=re?C[M]:M;J.push(p[R][A])}E=J.join("").trim()===""}if(!E){for(var w=0;w<K;w++){0<w&&!P&&(N+=d);var X=Q&&re?C[w]:w;N+=v(p[R][X],w)}R<p.length-1&&(!W||0<K&&!P)&&(N+=y)}}return N}function v(C,p){var W,N;return C==null?"":C.constructor===Date?JSON.stringify(C).slice(1,25):(N=!1,U&&typeof C=="string"&&U.test(C)&&(C="'"+C,N=!0),W=C.toString().replace(g,V),(N=N||c===!0||typeof c=="function"&&c(C,p)||Array.isArray(c)&&c[p]||((Q,re)=>{for(var x=0;x<re.length;x++)if(-1<Q.indexOf(re[x]))return!0;return!1})(W,a.BAD_DELIMITERS)||-1<W.indexOf(d)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?j+W+j:W)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=m,a.ParserHandle=q,a.NetworkStreamer=I,a.FileStreamer=z,a.StringStreamer=$,a.ReadableStreamStreamer=O,t.jQuery&&((l=t.jQuery).fn.parse=function(r){var n=r.config||{},c=[];return this.each(function(y){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)c.push({file:this.files[j],inputElem:this,instanceConfig:l.extend({},n)})}),f(),this;function f(){if(c.length===0)B(r.complete)&&r.complete();else{var y,j,V,ne,S=c[0];if(B(r.before)){var U=r.before(S.file,S.inputElem);if(typeof U=="object"){if(U.action==="abort")return y="AbortError",j=S.file,V=S.inputElem,ne=U.reason,void(B(r.error)&&r.error({name:y},j,V,ne));if(U.action==="skip")return void d();typeof U.config=="object"&&(S.instanceConfig=l.extend(S.instanceConfig,U.config))}else if(U==="skip")return void d()}var g=S.instanceConfig.complete;S.instanceConfig.complete=function(Z){B(g)&&g(Z,S.file,S.inputElem),d()},a.parse(S.file,S.instanceConfig)}}function d(){c.splice(0,1),f()}}),u&&(t.onmessage=function(r){r=r.data,a.WORKER_ID===void 0&&r&&(a.WORKER_ID=r.workerId),typeof r.input=="string"?t.postMessage({workerId:a.WORKER_ID,results:a.parse(r.input,r.config),finished:!0}):(t.File&&r.input instanceof File||r.input instanceof Object)&&(r=a.parse(r.input,r.config))&&t.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}),(I.prototype=Object.create(_.prototype)).constructor=I,(z.prototype=Object.create(_.prototype)).constructor=z,($.prototype=Object.create($.prototype)).constructor=$,(O.prototype=Object.create(_.prototype)).constructor=O,a})})(ke)),ke.exports}var De=Xe();const We=Ve(De);function et(e,s){return"csv/"+s+"_allmatch_result-J"+e+".csv"}async function tt(e="./json/season_map.json"){const s=await fetch(e);if(!s.ok)throw new Error(`Failed to load season map: ${s.status} ${s.statusText}`);return s.json()}function Se(e,s){const i="0000"+e;return i.substring(i.length-s)}function nt(e){return typeof e=="string"?e:[e.getFullYear(),Se(e.getMonth()+1,2),Se(e.getDate(),2)].join("/")}function Ee(e){return typeof e=="string"?e.replace(/(\d\d:\d\d):\d\d/,"$1"):[Se(e.getHours(),2),Se(e.getMinutes(),2)].join(":")}function Ce(e){return e.replace(/^\d{4}\//,"")}function je(e,s,i=!1,t=null,l=null){return e&&s?e>s?3:e<s?0:t!==null&&l!==null&&t>l?2:1:0}function rt(e){return e.status===void 0?e.home_goal&&e.away_goal?"試合終了":"":e.status==="ＶＳ"?"開始前":e.status.replace("速報中","")}function st(e){return e.status?.includes("速報中")??!1}function it(e,s,i,t=null){const l={};t==="null"&&(t="DefaultGroup"),s.includes("group")&&(t=null);for(const o of e){const u=t??o.group??"DefaultGroup";if(!(u in l)){l[u]={};for(const b of i)l[u][b]={df:[]}}o.home_team in l[u]||(l[u][o.home_team]={df:[]}),o.away_team in l[u]||(l[u][o.away_team]={df:[]});let h=o.match_date;const k=new Date(o.match_date);isNaN(k.getTime())||(h=nt(k));const a=o.home_pk_score?parseInt(o.home_pk_score):null,_=o.away_pk_score?parseInt(o.away_pk_score):null,I=!!(o.home_goal&&o.away_goal),z=rt(o),$=st(o),O={is_home:!0,opponent:o.away_team,goal_get:o.home_goal,goal_lose:o.away_goal,pk_get:a,pk_lose:_,has_result:I,point:je(o.home_goal,o.away_goal,!1,a,_),match_date:h,section_no:o.section_no,stadium:o.stadium,start_time:o.start_time,status:z,live:$};l[u][o.home_team].df.push(O);const q={is_home:!1,opponent:o.home_team,goal_get:o.away_goal,goal_lose:o.home_goal,pk_get:_,pk_lose:a,has_result:I,point:je(o.away_goal,o.home_goal,!1,_,a),match_date:h,section_no:o.section_no,stadium:o.stadium,start_time:o.start_time,status:z,live:$};l[u][o.away_team].df.push(q)}return l}function He(e){return{teamCount:e[0],promotionCount:e[1],relegationCount:e[2],teams:e[3],rankClass:e[4]??{},extra:e[5]??{}}}function ve(e,s){return(s??0)-(e??0)}function ee(e,s,i){const t=(i?"disp_":"")+s;return e[t]??0}function Te(e,s){return Object.keys(s).sort((i,t)=>{const l=s[i][e]??0;return(s[t][e]??0)-l})}function ot(e,s){const i=s.startsWith("disp_");return Object.keys(e).sort((t,l)=>{const o=h=>e[h][s]??0;let u=ve(o(t),o(l));if(u!==0)return u;if(s.endsWith("avlbl_pt")){const h=s.replace("avlbl_pt","point"),k=a=>e[a][h]??0;if(u=ve(k(t),k(l)),u!==0)return u}return u=ve(ee(e[t],"goal_diff",i),ee(e[l],"goal_diff",i)),u!==0?u:ve(ee(e[t],"goal_get",i),ee(e[l],"goal_get",i))})}function at(e){const s={};for(const i of Object.keys(e)){const t=e[i];s[i]={point:t.point??0,avlbl_pt:t.avlbl_pt??0,disp_point:t.disp_point??0,disp_avlbl_pt:t.disp_avlbl_pt??0,rest_games:t.rest_games??{},disp_rest_games:t.disp_rest_games??{}}}return s}function Ie(e,s,i){const t=s?"disp_avlbl_pt":"avlbl_pt",l=Te(t,i);return e>=l.length?0:(i[l[e]][t]??0)+1}function Re(e,s,i){const t=s?"disp_point":"point",l=Te(t,i);return e<=0||e>l.length?0:i[l[e-1]][t]??0}function Oe(e,s,i,t){const l=i?"disp_avlbl_pt":"avlbl_pt",o=i?"disp_rest_games":"rest_games",u=e-1,h=at(t);delete h[s];const k=Te(l,h),a=t[s][o]??{};for(const _ of Object.keys(a))h[_]!==void 0&&(h[_][l]-=3*(a[_]??0));return u>=k.length?0:h[k[u]][l]}function $e(e,s){if(e.has_result)return 0;const i=e.match_date;return i&&/\d\d\/\d\d$/.test(i)&&i<=s?1:2}function lt(e,s,i){e.df.sort((t,l)=>{const o=$e(t,s),u=$e(l,s);if(o!==u)return o-u;const h=t[i],k=l[i];return i==="section_no"?parseInt(h)-parseInt(k):/\d\d\/\d\d$/.test(h)?/\d\d\/\d\d$/.test(k)?h<k?-1:h>k?1:0:-1:/\d\d\/\d\d$/.test(k)?1:0})}function ct(e,s,i){e.point=0,e.avlbl_pt=0,e.goal_diff=0,e.goal_get=0,e.win=0,e.pk_win=0,e.pk_loss=0,e.lose=0,e.draw=0,e.all_game=0,e.rest_games={},e.disp_avlbl_pt=0,e.disp_point=0,e.disp_goal_diff=0,e.disp_goal_get=0,e.disp_win=0,e.disp_pk_win=0,e.disp_pk_loss=0,e.disp_lose=0,e.disp_draw=0,e.disp_all_game=0,e.disp_rest_games={},lt(e,s,i);for(const t of e.df)t.has_result?(e.point+=t.point,e.avlbl_pt+=t.point,e.all_game+=1,t.point===3?e.win+=1:t.point===2?e.pk_win+=1:t.point===1&&t.pk_get!==null?e.pk_loss+=1:t.point===1?e.draw+=1:e.lose+=1,e.goal_diff+=parseInt(t.goal_get)-parseInt(t.goal_lose),e.goal_get+=parseInt(t.goal_get),t.match_date<=s?(t.point===3?e.disp_win+=1:t.point===2?e.disp_pk_win+=1:t.point===1&&t.pk_get!==null?e.disp_pk_loss+=1:t.point===1?e.disp_draw+=1:e.disp_lose+=1,e.disp_all_game+=1,e.disp_point+=t.point,e.disp_avlbl_pt+=t.point,e.disp_goal_diff+=parseInt(t.goal_get)-parseInt(t.goal_lose),e.disp_goal_get+=parseInt(t.goal_get)):(e.disp_avlbl_pt+=3,e.disp_rest_games[t.opponent]=(e.disp_rest_games[t.opponent]??0)+1)):(e.avlbl_pt+=3,e.disp_avlbl_pt+=3,e.rest_games[t.opponent]=(e.rest_games[t.opponent]??0)+1,e.disp_rest_games[t.opponent]=(e.disp_rest_games[t.opponent]??0)+1);e.avrg_pt=e.all_game===0?0:e.point/e.all_game,e.disp_avrg_pt=e.disp_all_game===0?0:e.disp_point/e.disp_all_game}function ut(e){return Object.values(e).reduce((s,i)=>s+Object.keys(i.rest_games??{}).length,0)}function dt(e,s,i,t){const{teamCount:l,promotionCount:o,relegationCount:u}=i,h=l-u,k=Re(1,t,e),a=Ie(1,t,e),_=u>0?Re(h,t,e):void 0,I=u>0?Ie(h,t,e):void 0,z=Ie(o,t,e),$=Re(o,t,e),O=ut(e)===0,q=[];let b=0;for(const m of s){b++;const L=e[m],Y=ee(L,"point",t),ie=ee(L,"avlbl_pt",t),de=ee(L,"all_game",t),se=ee(L,"goal_get",t),B=ee(L,"goal_diff",t),r=ee(L,"avrg_pt",t),n={rank:b,name:`<div class="${m}">${m}</div>`,win:ee(L,"win",t),pk_win:ee(L,"pk_win",t),pk_loss:ee(L,"pk_loss",t),draw:ee(L,"draw",t),lose:ee(L,"lose",t),point:Y,avlbl_pt:ie,avrg_pt:r.toFixed(2),all_game:de,goal_get:se,goal_diff:B,goal_lose:se-B,future_game:L.df.length-de,champion:""};if(O)n.champion=b<=1?"確定":"なし",o>0&&(n.promotion=b<=o?"確定":"なし"),u>0&&(n.relegation=b<=h?"確定":"降格");else{const c=ie-k,f=Y-a,d=ie-Oe(1,m,t,e);if(n.champion=f>=0?"確定":c<0?"なし":d>=0?"自力":"他力",o>0){const y=ie-$,j=Y-z,V=ie-Oe(o,m,t,e);n.promotion=j>=0?"確定":y<0?"なし":V>=0?"自力":"他力"}if(u>0&&I!==void 0&&_!==void 0){const y=Y-I,j=ie-_,V=ie-Oe(h,m,t,e);n.relegation=y>=0?"確定":j<0?"降格":V>=0?"自力":"他力"}else n.relegation="確定"}q.push(n)}return q}function ft(e,s){const i=e.querySelector("thead");if(!i)return;const t=[{id:"rank",label:"",sortable:!0},{id:"name",label:"チーム"},{id:"all_game",label:"試合",sortable:!0},{id:"point",label:"勝点",sortable:!0},{id:"avrg_pt",label:"平均",sortable:!0},{id:"avlbl_pt",label:"最大",sortable:!0},{id:"win",label:"勝",sortable:!0},...s?[{id:"pk_win",label:"PK勝",sortable:!0},{id:"pk_loss",label:"PK負",sortable:!0}]:[],{id:"draw",label:"分",sortable:!0},{id:"lose",label:"負",sortable:!0},{id:"goal_get",label:"得点",sortable:!0},{id:"goal_lose",label:"失点",sortable:!0},{id:"goal_diff",label:"点差",sortable:!0},{id:"future_game",label:"残り",sortable:!0},{label:"-"},{id:"champion",label:"優勝",sortable:!0},{id:"promotion",label:"昇格<br/>ACL",sortable:!0},{id:"relegation",label:"残留",sortable:!0}],l=document.createElement("tr");for(const o of t){const u=document.createElement("th");o.id&&u.setAttribute("data-id",o.id),o.sortable&&u.setAttribute("sortable",""),u.innerHTML=o.label,l.appendChild(u)}i.innerHTML="",i.appendChild(l)}function pt(e,s,i){ft(e,i);const t=new SortableTable;t.setTable(e),t.setData(s)}function Ue(e,s){return Ce(s)+" "+e.opponent+"<br/>"+e.goal_get+"-"+e.goal_lose+"<br/>"+e.stadium}function ht(e,s){return Ce(s)+" "+e.opponent+"<br/>"+e.goal_get+"-"+e.goal_lose+" ("+e.pk_get+"-"+e.pk_lose+")<br/>"+e.stadium}function _t(e,s){return Ce(s)+" "+e.opponent}function Ke(e,s){return"("+e.section_no+") "+Ee(e.start_time)+"<br/>"+Ce(s)+" "+e.opponent+"<br/>"+e.goal_get+"-"+e.goal_lose+" "+e.stadium}function gt(e,s,i=!1){const t=s?"disp_":"",l=s?"表示時の状態":"最新の状態",o=h=>e[t+h]??0,u=i?o("pk_win")+"PK勝 "+o("pk_loss")+"PK負 ":"";return l+"<br/>"+o("win")+"勝 "+u+o("draw")+"分 "+o("lose")+"敗<br/>勝点"+o("point")+", 最大"+o("avlbl_pt")+"<br/>"+o("goal_get")+"得点, "+(o("goal_get")-o("goal_diff"))+"失点<br/>得失点差: "+o("goal_diff")}function mt(e){return e.join("<hr/>")}function yt(e,s){const i=s.rankClass[String(e)];return i||(e<=s.promotionCount?"promoted":e>s.teamCount-s.relegationCount?"relegated":"")}function vt(e,s){const i=e.startsWith("#")?e.slice(1):e,t=Math.floor(i.length/3);if(t<1)return 0;const l=[0,1,2].map(k=>parseInt(i.slice(t*k,t*(k+1)),16)),o=s.r,u=s.g,h=s.b;return Math.max(l[0]*o,l[1]*u,l[2]*h)/255}function bt(e,s,i,t,l=!1){const o=[],u=[],h=new Set;for(const a of s.df){const _=a.match_date===""?"未定":a.match_date;if(_!=="未定"&&h.add(_),!a.has_result||_>i)o.push('<div class="tall box"><div class="future bg '+e+'"></div><p class="tooltip">'+Ue(a,_)+'<span class="tooltiptext '+e+'">('+a.section_no+") "+Ee(a.start_time)+(a.status?"<br/>"+a.status:"")+`</span></p></div>
`);else if(a.point===3)o.push('<div class="tall box'+(a.live?" live":"")+'"><p class="tooltip '+e+'">'+Ue(a,_)+'<span class="tooltiptext halfW '+e+'">('+a.section_no+") "+Ee(a.start_time)+(a.status?"<br/>"+a.status:"")+`</span></p></div>
`);else if(a.point===2)o.push('<div class="medium box'+(a.live?" live":"")+'"><p class="tooltip '+e+'">'+ht(a,_)+'<span class="tooltiptext halfW '+e+'">('+a.section_no+") "+Ee(a.start_time)+"<br/>"+a.stadium+(a.status?"<br/>"+a.status:"")+`</span></p></div>
`);else if(a.point===1)o.push('<div class="short box'+(a.live?" live":"")+'"><p class="tooltip '+e+'">'+_t(a,_)+'<span class="tooltiptext fullW '+e+'">'+Ke(a,_)+(a.status?"<br/>"+a.status:"")+"</span></p></div>");else{let I=Ke(a,_);a.live&&(I='<div class="live">'+I+(a.status?"<br/>"+a.status:"")+"</div>"),u.push(I)}}const k=s.disp_avlbl_pt??0;return{graph:o,avlbl_pt:k,teamName:e,loseBox:u,stats:gt(s,t,l),matchDates:[...h].sort()}}function kt(e){const s=[Math.floor(e.teamCount/2)];return e.promotionCount!==0&&s.unshift(e.promotionCount),e.relegationCount!==0&&s.push(e.teamCount-e.relegationCount),s}function Et(e,s){const i=Array.from({length:e},(t,l)=>l+1).map(t=>'<div class="point box">'+t+"</div>");return s&&i.reverse(),'<div class="point_column"><div class="point box">順位</div><div class="point box">勝点</div>'+i.join("")+`<div class="point box">勝点</div><div class="point box">順位</div></div>

`}function wt(e,s,i,t,l,o){const u=[...e.graph],h=[...e.loseBox],k=i-e.avlbl_pt;k>0&&u.push('<div class="space box" style="height:'+t*k+'px">('+k+")</div>"),l&&(u.reverse(),h.reverse());const _='<div class="short box '+yt(s,o)+'">'+s+"</div>",I='<div class="short box tooltip '+e.teamName+'">'+e.teamName+'<span class=" tooltiptext fullW '+e.teamName+'">成績情報:<hr/>'+e.stats+"<hr/>敗戦記録:<hr/>"+mt(h)+`</span></div>
`;return'<div id="'+e.teamName+'_column">'+_+I+u.join("")+I+_+`</div>

`}function St(e,s,i,t,l,o,u,h,k=!1){const a={},_=new Set;let I=0;_.add("1970/01/01");for(const b of s){const m=e[b];if(!m)continue;const L=bt(b,m,t,l,k);a[b]=L,I=Math.max(I,L.avlbl_pt);for(const Y of L.matchDates)_.add(Y)}const z=[..._].sort(),$=Et(I,u),O=new Set(kt(i));let q=$;return s.forEach((b,m)=>{O.has(m)&&(q+=$);const L=a[b];L&&(q+=wt(L,m+1,I,h,u,i))}),q+=$,{html:q,matchDates:z}}function Ct(e,s){let i=e.length-1;for(let t=0;t<e.length;t++)if(e[t]>s){i=Math.max(0,t-1);break}return i}function xt(e,s){return e==="1970/01/01"?"開幕前":s}const It={r:.9,g:.8,b:.4};function Be(e){let s;for(const i of Array.from(document.styleSheets))if(i.href&&i.href.endsWith("j_points.css")){s=i;break}if(s){for(const i of Array.from(s.cssRules))if(i.selectorText===e)return i}}function Rt(){const e=Be(".short");return e&&parseInt(e.style.height)||0}function Ot(e,s=!0){const i=Be(".future");if(!i)return;i.style.opacity=e;const t=document.getElementById("current_opacity");if(t&&(t.textContent=e),s){const l=document.getElementById("future_opacity");l&&(l.value=e)}}function Lt(e,s=!0){const i=Be(".space");if(i&&(i.style.backgroundColor=e,i.style.color=vt(e,It)>.5?"black":"white",s)){const t=document.getElementById("space_color");t&&(t.value=e)}}function Je(e,s,i=!0){e.style.transform="scale("+s+")";const t=e.querySelector(".point_column");if(t&&(e.style.height=String(t.clientHeight*parseFloat(s))+"px"),i){const l=document.getElementById("scale_slider");l&&(l.value=s);const o=document.getElementById("current_scale");o&&(o.textContent=s)}}const Ae="jleague_viewer_prefs";function Ge(){try{const e=localStorage.getItem(Ae);return e?JSON.parse(e):{}}catch{return{}}}function we(e){try{const s={...Ge(),...e};localStorage.setItem(Ae,JSON.stringify(s))}catch{}}function Tt(){try{localStorage.removeItem(Ae)}catch{}}const Bt="1";function Le(e){return`J${e}リーグ`}function be(e){return document.getElementById(e).value}function me(e){const s=document.getElementById("status_msg");s&&(s.textContent=e)}let ue=null;async function At(){if(ue!==null)return ue;try{const e=await fetch("./csv/csv_timestamp.csv");if(!e.ok)return ue={};const s=await e.text(),i=We.parse(s,{header:!0,skipEmptyLines:"greedy"}),t={};for(const l of i.data){const o=l.file.replace("../docs/",""),u=new Date(l.date.replace(" ","T"));t[o]=isNaN(u.getTime())?l.date:Pt(u)}return ue=t}catch{return ue={}}}function Pt(e){const s=i=>String(i).padStart(2,"0");return`${e.getFullYear()}/${s(e.getMonth()+1)}/${s(e.getDate())} ${s(e.getHours())}:${s(e.getMinutes())}`}function ze(e){const s=document.getElementById("data_timestamp");!s||!ue||(s.textContent=ue[e]??"")}function Mt(){const e=new URLSearchParams(location.search);return{category:e.get("category")??"",season:e.get("season")??void 0}}function Ft(e,s){const i=new URL(location.href);i.searchParams.set("category",e),i.searchParams.set("season",s),history.replaceState(null,"",i.toString())}function jt(e){return["first_bottom","last_bottom"].includes(e)?"section_no":"match_date"}function $t(e){return["old_bottom","first_bottom"].includes(e)}function Ut(e){const s=document.getElementById("category_key");s.innerHTML="";for(const i of Object.keys(e).sort()){const t=document.createElement("option");t.value=i,t.textContent=Le(i),s.appendChild(t)}}function Ne(e,s){const i=document.getElementById("season_key");i.innerHTML="";const t=Object.keys(e[s]??{}).sort().reverse();for(const l of t){const o=document.createElement("option");o.value=l,o.textContent=l,i.appendChild(o)}}let Ye=[];function Kt(e,s){Ye=e;const i=document.getElementById("date_slider");if(!i||e.length===0)return;i.max=String(e.length-1);const t=Ct(e,s);i.value=String(t);const l=document.getElementById("post_date_slider");l&&(l.textContent=e[e.length-1]??"");const o=document.getElementById("target_date_display");o&&(o.textContent=xt(e[t]??"1970/01/01",s))}let ye=null,Qe=20;function qe(e,s,i,t,l,o,u,h,k){const a=s[i]?.[t];if(!a)return;const _=He(a),I={};for(const[m,L]of Object.entries(e.groupData))I[m]={...L,df:[...L.df]};for(const m of Object.values(I))ct(m,l,u);const z=ot(I,o),{hasPk:$}=e,O=document.getElementById("box_container");if(O){const{html:m,matchDates:L}=St(I,z,_,l,k,u,h,Qe,$);O.innerHTML=m;const Y=document.getElementById("scale_slider");Je(O,Y?.value??"1",!1),Kt(L,l)}const q=dt(I,z,_,k),b=document.getElementById("ranktable");b&&pt(b,q,$)}function he(e){const s=be("category_key"),i=be("season_key"),t=`${s}/${i}`,l=document.getElementById("target_date").value,o=l.replace(/-/g,"/"),u=be("match_sort_key"),h=be("team_sort_key"),k=jt(u),a=$t(u),_=h.startsWith("disp_");if(!e[s]?.[i]){me(`シーズン情報なし: ${s}/${i}`);return}Ft(s,i),we({category:s,season:i,targetDate:l,teamSortKey:h,matchSortKey:u});const z=et(s,i);if(ye?.key===t){qe(ye,e,s,i,o,h,k,a,_),ze(z),me(`${Le(s)} ${i} (cached)`);return}const $=Math.floor(Date.now()/1e3/300);me("CSVを読み込み中..."),We.parse(z+"?_="+$,{header:!0,skipEmptyLines:"greedy",download:!0,complete:O=>{const q=He(e[s][i]),m=it(O.data,O.meta.fields??[],q.teams,"matches").matches??{},L=(O.meta.fields??[]).includes("home_pk_score"),Y={key:t,groupData:m,teamCount:q.teamCount,hasPk:L};ye=Y,qe(Y,e,s,i,o,h,k,a,_),ze(z),me(`${Le(s)} ${i} — ${O.data.length} 行`)},error:O=>{me(`CSV読み込みエラー: ${String(O)}`)}})}async function zt(){At();const e=await tt(),s=Rt();s>0&&(Qe=s),Ut(e);const i=Mt(),t=Ge(),l=document.getElementById("category_key"),o=i.category&&e[i.category]?i.category:t.category&&e[t.category]?t.category:Bt;l.value=o,Ne(e,o);const u=document.getElementById("season_key"),h=i.season&&e[o]?.[i.season]?i.season:t.season&&e[o]?.[t.season]?t.season:u.options[0]?.value??"";u.value=h;const k=document.getElementById("team_sort_key"),a=document.getElementById("match_sort_key");k&&t.teamSortKey&&(k.value=t.teamSortKey),a&&t.matchSortKey&&(a.value=t.matchSortKey);const _=document.getElementById("future_opacity"),I=document.getElementById("space_color"),z=document.getElementById("scale_slider");_&&t.futureOpacity&&(_.value=t.futureOpacity),I&&t.spaceColor&&(I.value=t.spaceColor),z&&t.scale&&(z.value=t.scale);const $=document.getElementById("target_date");if(t.targetDate)$.value=t.targetDate;else{const b=new Date;$.value=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`}l.addEventListener("change",()=>{ye=null,Ne(e,l.value),he(e)}),document.getElementById("season_key")?.addEventListener("change",()=>{ye=null,he(e)});for(const b of["target_date","team_sort_key","match_sort_key"])document.getElementById(b)?.addEventListener("change",()=>{he(e)});const O=document.getElementById("date_slider");if(O){const b=()=>{const m=Ye[parseInt(O.value)];if(!m)return;const L=m==="1970/01/01";document.getElementById("target_date").value=m.replace(/\//g,"-");const Y=document.getElementById("target_date_display");Y&&(Y.textContent=L?"開幕前":m),he(e)};O.addEventListener("change",b),document.getElementById("date_slider_down")?.addEventListener("click",()=>{O.value=String(Math.max(0,parseInt(O.value)-1)),b()}),document.getElementById("date_slider_up")?.addEventListener("click",()=>{O.value=String(Math.min(parseInt(O.max),parseInt(O.value)+1)),b()}),document.getElementById("reset_date_slider")?.addEventListener("click",()=>{const m=new Date;document.getElementById("target_date").value=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`,he(e)})}const q=document.getElementById("box_container");document.getElementById("scale_slider")?.addEventListener("input",b=>{const m=b.target.value;Je(q,m),we({scale:m})}),document.getElementById("future_opacity")?.addEventListener("input",b=>{const m=b.target.value;Ot(m),we({futureOpacity:m})}),document.getElementById("space_color")?.addEventListener("input",b=>{const m=b.target.value;Lt(m),we({spaceColor:m})}),document.getElementById("reset_prefs")?.addEventListener("click",()=>{Tt(),location.assign(location.pathname)}),he(e)}zt().catch(console.error);
