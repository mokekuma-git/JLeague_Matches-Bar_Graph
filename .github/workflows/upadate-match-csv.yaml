name: Update matches csv

on:
  schedule:
    - cron: '0 16 * * *'
    - cron: '50 10 9 4 *'
    - cron: '40 11 9 4 *'
    - cron: '50 10 11 4 *'
    - cron: '40 11 11 4 *'
    - cron: '50 4 12 4 *'
    - cron: '40 5 12 4 *'
    - cron: '50 5 12 4 *'
    - cron: '40 6 12 4 *'
    - cron: '50 6 12 4 *'
    - cron: '40 7 12 4 *'
    - cron: '50 7 12 4 *'
    - cron: '40 8 12 4 *'
    - cron: '50 4 13 4 *'
    - cron: '40 5 13 4 *'
    - cron: '50 5 13 4 *'
    - cron: '40 6 13 4 *'
    - cron: '50 6 13 4 *'
    - cron: '40 7 13 4 *'
    - cron: '50 7 13 4 *'
    - cron: '40 8 13 4 *'
    - cron: '50 10 16 4 *'
    - cron: '40 11 16 4 *'
    - cron: '20 11 16 4 *'
    - cron: '10 12 16 4 *'
    - cron: '50 5 18 4 *'
    - cron: '40 6 18 4 *'
    - cron: '50 5 19 4 *'
    - cron: '40 6 19 4 *'
    - cron: '50 4 20 4 *'
    - cron: '40 5 20 4 *'
    - cron: '50 5 20 4 *'
    - cron: '40 6 20 4 *'
    - cron: '50 6 20 4 *'
    - cron: '40 7 20 4 *'
    - cron: '50 7 20 4 *'
    - cron: '40 8 20 4 *'
    - cron: '50 8 20 4 *'
    - cron: '40 9 20 4 *'
    - cron: '50 10 23 4 *'
    - cron: '40 11 23 4 *'
    - cron: '50 10 25 4 *'
    - cron: '40 11 25 4 *'
    - cron: '20 11 25 4 *'
    - cron: '10 12 25 4 *'
    - cron: '50 5 26 4 *'
    - cron: '40 6 26 4 *'
    - cron: '50 4 27 4 *'
    - cron: '40 5 27 4 *'
    - cron: '55 4 29 4 *'
    - cron: '45 5 29 4 *'
    - cron: '50 5 29 4 *'
    - cron: '40 6 29 4 *'
    - cron: '50 6 29 4 *'
    - cron: '40 7 29 4 *'
    - cron: '50 4 3 5 *'
    - cron: '40 5 3 5 *'
    - cron: '20 5 3 5 *'
    - cron: '10 6 3 5 *'
    - cron: '50 5 3 5 *'
    - cron: '40 6 3 5 *'
    - cron: '50 6 3 5 *'
    - cron: '40 7 3 5 *'
    - cron: '50 7 3 5 *'
    - cron: '40 8 3 5 *'
    - cron: '50 9 3 5 *'
    - cron: '40 10 3 5 *'
    - cron: '50 10 3 5 *'
    - cron: '40 11 3 5 *'
    - cron: '50 4 6 5 *'
    - cron: '40 5 6 5 *'
    - cron: '45 5 6 5 *'
    - cron: '35 6 6 5 *'
    - cron: '50 5 6 5 *'
    - cron: '40 6 6 5 *'
    - cron: '50 6 6 5 *'
    - cron: '40 7 6 5 *'
    - cron: '40 7 6 5 *'
    - cron: '30 8 6 5 *'
    - cron: '50 7 6 5 *'
    - cron: '40 8 6 5 *'
    - cron: '50 9 6 5 *'
    - cron: '40 10 6 5 *'
    - cron: '50 10 6 5 *'
    - cron: '40 11 6 5 *'
    - cron: '50 10 7 5 *'
    - cron: '40 11 7 5 *'
    - cron: '50 5 10 5 *'
    - cron: '40 6 10 5 *'
    - cron: '50 6 10 5 *'
    - cron: '40 7 10 5 *'
    - cron: '50 7 10 5 *'
    - cron: '40 8 10 5 *'
    - cron: '50 4 11 5 *'
    - cron: '40 5 11 5 *'
    - cron: '55 4 11 5 *'
    - cron: '45 5 11 5 *'
    - cron: '50 5 11 5 *'
    - cron: '40 6 11 5 *'
    - cron: '55 5 11 5 *'
    - cron: '45 6 11 5 *'
    - cron: '50 6 11 5 *'
    - cron: '40 7 11 5 *'
    - cron: '50 10 14 5 *'
    - cron: '40 11 14 5 *'
    - cron: '20 5 17 5 *'
    - cron: '10 6 17 5 *'
    - cron: '50 5 17 5 *'
    - cron: '40 6 17 5 *'
    - cron: '20 6 17 5 *'
    - cron: '10 7 17 5 *'
    - cron: '50 6 17 5 *'
    - cron: '40 7 17 5 *'
    - cron: '50 7 17 5 *'
    - cron: '40 8 17 5 *'
    - cron: '50 10 17 5 *'
    - cron: '40 11 17 5 *'
    - cron: '50 4 18 5 *'
    - cron: '40 5 18 5 *'
    - cron: '50 5 18 5 *'
    - cron: '40 6 18 5 *'
    - cron: '50 6 18 5 *'
    - cron: '40 7 18 5 *'
    - cron: '50 9 18 5 *'
    - cron: '40 10 18 5 *'
    - cron: '50 10 21 5 *'
    - cron: '40 11 21 5 *'
    - cron: '50 6 24 5 *'
    - cron: '40 7 24 5 *'
    - cron: '20 9 24 5 *'
    - cron: '10 10 24 5 *'
    - cron: '50 4 25 5 *'
    - cron: '40 5 25 5 *'
    - cron: '50 5 25 5 *'
    - cron: '40 6 25 5 *'
    - cron: '50 6 25 5 *'
    - cron: '40 7 25 5 *'
    - cron: '50 7 25 5 *'
    - cron: '40 8 25 5 *'
    - cron: '20 11 28 5 *'
    - cron: '10 12 28 5 *'
    - cron: '50 5 31 5 *'
    - cron: '40 6 31 5 *'
    - cron: '50 7 31 5 *'
    - cron: '40 8 31 5 *'
    - cron: '20 9 31 5 *'
    - cron: '10 10 31 5 *'
    - cron: '50 9 31 5 *'
    - cron: '40 10 31 5 *'
    - cron: '55 9 31 5 *'
    - cron: '45 10 31 5 *'
    - cron: '50 10 31 5 *'
    - cron: '40 11 31 5 *'
    - cron: '50 5 1 6 *'
    - cron: '40 6 1 6 *'
    - cron: '50 6 1 6 *'
    - cron: '40 7 1 6 *'
    - cron: '50 7 1 6 *'
    - cron: '40 8 1 6 *'
    - cron: '50 10 1 6 *'
    - cron: '40 11 1 6 *'
    - cron: '50 5 7 6 *'
    - cron: '40 6 7 6 *'
    - cron: '50 9 7 6 *'
    - cron: '40 10 7 6 *'
    - cron: '50 10 7 6 *'
    - cron: '40 11 7 6 *'
    - cron: '50 4 8 6 *'
    - cron: '40 5 8 6 *'
    - cron: '50 5 8 6 *'
    - cron: '40 6 8 6 *'
    - cron: '50 5 14 6 *'
    - cron: '40 6 14 6 *'
    - cron: '50 6 14 6 *'
    - cron: '40 7 14 6 *'
    - cron: '50 8 14 6 *'
    - cron: '40 9 14 6 *'
    - cron: '20 9 14 6 *'
    - cron: '10 10 14 6 *'
    - cron: '50 9 14 6 *'
    - cron: '40 10 14 6 *'
    - cron: '50 10 14 6 *'
    - cron: '40 11 14 6 *'
    - cron: '50 5 15 6 *'
    - cron: '40 6 15 6 *'
    - cron: '50 7 15 6 *'
    - cron: '40 8 15 6 *'
    - cron: '50 8 15 6 *'
    - cron: '40 9 15 6 *'
    - cron: '50 9 15 6 *'
    - cron: '40 10 15 6 *'
    - cron: '20 10 15 6 *'
    - cron: '10 11 15 6 *'
    - cron: '50 10 15 6 *'
    - cron: '40 11 15 6 *'
    - cron: '50 5 21 6 *'
    - cron: '40 6 21 6 *'
    - cron: '50 7 21 6 *'
    - cron: '40 8 21 6 *'
    - cron: '50 9 21 6 *'
    - cron: '40 10 21 6 *'
    - cron: '20 10 21 6 *'
    - cron: '10 11 21 6 *'
    - cron: '50 10 21 6 *'
    - cron: '40 11 21 6 *'
    - cron: '25 5 22 6 *'
    - cron: '15 6 22 6 *'
    - cron: '50 5 22 6 *'
    - cron: '40 6 22 6 *'
    - cron: '50 6 22 6 *'
    - cron: '40 7 22 6 *'
    - cron: '50 9 22 6 *'
    - cron: '40 10 22 6 *'
    - cron: '20 10 22 6 *'
    - cron: '10 11 22 6 *'
    - cron: '50 10 25 6 *'
    - cron: '40 11 25 6 *'
    - cron: '20 11 25 6 *'
    - cron: '10 12 25 6 *'
    - cron: '50 4 27 6 *'
    - cron: '40 5 27 6 *'
    - cron: '50 5 28 6 *'
    - cron: '40 6 28 6 *'
    - cron: '50 9 28 6 *'
    - cron: '40 10 28 6 *'
    - cron: '20 10 28 6 *'
    - cron: '10 11 28 6 *'
    - cron: '50 10 28 6 *'
    - cron: '40 11 28 6 *'
    - cron: '20 11 28 6 *'
    - cron: '10 12 28 6 *'
    - cron: '50 9 29 6 *'
    - cron: '40 10 29 6 *'
    - cron: '50 10 29 6 *'
    - cron: '40 11 29 6 *'
    - cron: '50 10 30 6 *'
    - cron: '40 11 30 6 *'
    - cron: '50 10 2 7 *'
    - cron: '40 11 2 7 *'
    - cron: '50 5 5 7 *'
    - cron: '40 6 5 7 *'
    - cron: '50 9 5 7 *'
    - cron: '40 10 5 7 *'
    - cron: '20 10 5 7 *'
    - cron: '10 11 5 7 *'
    - cron: '45 10 5 7 *'
    - cron: '35 11 5 7 *'
    - cron: '50 10 5 7 *'
    - cron: '40 11 5 7 *'
    - cron: '50 9 6 7 *'
    - cron: '40 10 6 7 *'
    - cron: '50 10 6 7 *'
    - cron: '40 11 6 7 *'
    - cron: '50 9 12 7 *'
    - cron: '40 10 12 7 *'
    - cron: '55 9 12 7 *'
    - cron: '45 10 12 7 *'
    - cron: '20 10 12 7 *'
    - cron: '10 11 12 7 *'
    - cron: '50 10 12 7 *'
    - cron: '40 11 12 7 *'
    - cron: '20 11 12 7 *'
    - cron: '10 12 12 7 *'
    - cron: '50 9 19 7 *'
    - cron: '40 10 19 7 *'
    - cron: '50 10 19 7 *'
    - cron: '40 11 19 7 *'
    - cron: '50 9 20 7 *'
    - cron: '40 10 20 7 *'
    - cron: '20 10 20 7 *'
    - cron: '10 11 20 7 *'
    - cron: '50 10 20 7 *'
    - cron: '40 11 20 7 *'
    - cron: '50 9 21 7 *'
    - cron: '40 10 21 7 *'
    - cron: '50 10 21 7 *'
    - cron: '40 11 21 7 *'
    - cron: '20 11 23 7 *'
    - cron: '10 12 23 7 *'
    - cron: '50 9 26 7 *'
    - cron: '40 10 26 7 *'
    - cron: '20 10 26 7 *'
    - cron: '10 11 26 7 *'
    - cron: '50 10 26 7 *'
    - cron: '40 11 26 7 *'
    - cron: '50 10 27 7 *'
    - cron: '40 11 27 7 *'
    - cron: '50 5 2 8 *'
    - cron: '40 6 2 8 *'
    - cron: '50 9 2 8 *'
    - cron: '40 10 2 8 *'
    - cron: '20 10 2 8 *'
    - cron: '10 11 2 8 *'
    - cron: '50 10 2 8 *'
    - cron: '40 11 2 8 *'
    - cron: '20 11 2 8 *'
    - cron: '10 12 2 8 *'
    - cron: '50 10 3 8 *'
    - cron: '40 11 3 8 *'
    - cron: '50 9 9 8 *'
    - cron: '40 10 9 8 *'
    - cron: '50 10 9 8 *'
    - cron: '40 11 9 8 *'
    - cron: '50 9 10 8 *'
    - cron: '40 10 10 8 *'
    - cron: '20 10 10 8 *'
    - cron: '10 11 10 8 *'
    - cron: '50 10 10 8 *'
    - cron: '40 11 10 8 *'
    - cron: '50 10 11 8 *'
    - cron: '40 11 11 8 *'
    - cron: '50 5 16 8 *'
    - cron: '40 6 16 8 *'
    - cron: '50 9 16 8 *'
    - cron: '40 10 16 8 *'
    - cron: '20 10 16 8 *'
    - cron: '10 11 16 8 *'
    - cron: '50 10 16 8 *'
    - cron: '40 11 16 8 *'
    - cron: '50 9 17 8 *'
    - cron: '40 10 17 8 *'
    - cron: '20 10 17 8 *'
    - cron: '10 11 17 8 *'
    - cron: '50 10 17 8 *'
    - cron: '40 11 17 8 *'
    - cron: '50 10 20 8 *'
    - cron: '40 11 20 8 *'
    - cron: '50 10 22 8 *'
    - cron: '40 11 22 8 *'
    - cron: '50 9 23 8 *'
    - cron: '40 10 23 8 *'
    - cron: '20 10 23 8 *'
    - cron: '10 11 23 8 *'
    - cron: '50 10 23 8 *'
    - cron: '40 11 23 8 *'
    - cron: '20 11 23 8 *'
    - cron: '10 12 23 8 *'
    - cron: '50 9 24 8 *'
    - cron: '40 10 24 8 *'
    - cron: '50 10 24 8 *'
    - cron: '40 11 24 8 *'
    - cron: '50 5 30 8 *'
    - cron: '40 6 30 8 *'
    - cron: '50 9 30 8 *'
    - cron: '40 10 30 8 *'
    - cron: '20 10 30 8 *'
    - cron: '10 11 30 8 *'
    - cron: '50 10 30 8 *'
    - cron: '40 11 30 8 *'
    - cron: '50 9 31 8 *'
    - cron: '40 10 31 8 *'
    - cron: '20 10 31 8 *'
    - cron: '10 11 31 8 *'
    - cron: '50 10 31 8 *'
    - cron: '40 11 31 8 *'

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        python-version: [3.12]

    steps:
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}
    - name: Set git config
      run: |
        git config --global user.name "mokekuma-git"
        git config --global user.email "mokekuma.git@gmail.com"
    - name: git checkout
      uses: actions/checkout@v4
      with:
        ref: main
    - name: Install Python dependencies
      uses: py-actions/py-dependency-install@v4
      with:
        path: "requirements.txt"
    - name: Update matches csv
      run: |
        DATE=`TZ=Asia/Tokyo date +'%m/%d %H:%M'`
        bash scripts/call_update_csv.sh github.event.schedule
        if (git diff --shortstat | grep '[0-9]'); then \
          git add .; \
          git commit -m "Make new csv (append games on $DATE)"; \
          git push origin HEAD; \
        fi
