name: Update matches csv

on:
  schedule:
    - cron: '0 16 * * *'
    - cron: '50 19 9 4 *'
    - cron: '40 20 9 4 *'
    - cron: '50 19 11 4 *'
    - cron: '40 20 11 4 *'
    - cron: '50 13 12 4 *'
    - cron: '40 14 12 4 *'
    - cron: '50 14 12 4 *'
    - cron: '40 15 12 4 *'
    - cron: '50 15 12 4 *'
    - cron: '40 16 12 4 *'
    - cron: '50 16 12 4 *'
    - cron: '40 17 12 4 *'
    - cron: '50 13 13 4 *'
    - cron: '40 14 13 4 *'
    - cron: '50 14 13 4 *'
    - cron: '40 15 13 4 *'
    - cron: '50 15 13 4 *'
    - cron: '40 16 13 4 *'
    - cron: '50 16 13 4 *'
    - cron: '40 17 13 4 *'
    - cron: '50 19 16 4 *'
    - cron: '40 20 16 4 *'
    - cron: '20 20 16 4 *'
    - cron: '10 21 16 4 *'
    - cron: '50 14 18 4 *'
    - cron: '40 15 18 4 *'
    - cron: '50 14 19 4 *'
    - cron: '40 15 19 4 *'
    - cron: '50 13 20 4 *'
    - cron: '40 14 20 4 *'
    - cron: '50 14 20 4 *'
    - cron: '40 15 20 4 *'
    - cron: '50 15 20 4 *'
    - cron: '40 16 20 4 *'
    - cron: '50 16 20 4 *'
    - cron: '40 17 20 4 *'
    - cron: '50 17 20 4 *'
    - cron: '40 18 20 4 *'
    - cron: '50 19 23 4 *'
    - cron: '40 20 23 4 *'
    - cron: '50 19 25 4 *'
    - cron: '40 20 25 4 *'
    - cron: '20 20 25 4 *'
    - cron: '10 21 25 4 *'
    - cron: '50 14 26 4 *'
    - cron: '40 15 26 4 *'
    - cron: '50 13 27 4 *'
    - cron: '40 14 27 4 *'
    - cron: '55 13 29 4 *'
    - cron: '45 14 29 4 *'
    - cron: '50 14 29 4 *'
    - cron: '40 15 29 4 *'
    - cron: '50 15 29 4 *'
    - cron: '40 16 29 4 *'
    - cron: '50 13 3 5 *'
    - cron: '40 14 3 5 *'
    - cron: '20 14 3 5 *'
    - cron: '10 15 3 5 *'
    - cron: '50 14 3 5 *'
    - cron: '40 15 3 5 *'
    - cron: '50 15 3 5 *'
    - cron: '40 16 3 5 *'
    - cron: '50 16 3 5 *'
    - cron: '40 17 3 5 *'
    - cron: '50 18 3 5 *'
    - cron: '40 19 3 5 *'
    - cron: '50 19 3 5 *'
    - cron: '40 20 3 5 *'
    - cron: '50 13 6 5 *'
    - cron: '40 14 6 5 *'
    - cron: '45 14 6 5 *'
    - cron: '35 15 6 5 *'
    - cron: '50 14 6 5 *'
    - cron: '40 15 6 5 *'
    - cron: '50 15 6 5 *'
    - cron: '40 16 6 5 *'
    - cron: '40 16 6 5 *'
    - cron: '30 17 6 5 *'
    - cron: '50 16 6 5 *'
    - cron: '40 17 6 5 *'
    - cron: '50 18 6 5 *'
    - cron: '40 19 6 5 *'
    - cron: '50 19 6 5 *'
    - cron: '40 20 6 5 *'
    - cron: '50 19 7 5 *'
    - cron: '40 20 7 5 *'
    - cron: '50 14 10 5 *'
    - cron: '40 15 10 5 *'
    - cron: '50 15 10 5 *'
    - cron: '40 16 10 5 *'
    - cron: '50 16 10 5 *'
    - cron: '40 17 10 5 *'
    - cron: '50 13 11 5 *'
    - cron: '40 14 11 5 *'
    - cron: '55 13 11 5 *'
    - cron: '45 14 11 5 *'
    - cron: '50 14 11 5 *'
    - cron: '40 15 11 5 *'
    - cron: '55 14 11 5 *'
    - cron: '45 15 11 5 *'
    - cron: '50 15 11 5 *'
    - cron: '40 16 11 5 *'
    - cron: '50 19 14 5 *'
    - cron: '40 20 14 5 *'
    - cron: '20 14 17 5 *'
    - cron: '10 15 17 5 *'
    - cron: '50 14 17 5 *'
    - cron: '40 15 17 5 *'
    - cron: '20 15 17 5 *'
    - cron: '10 16 17 5 *'
    - cron: '50 15 17 5 *'
    - cron: '40 16 17 5 *'
    - cron: '50 16 17 5 *'
    - cron: '40 17 17 5 *'
    - cron: '50 19 17 5 *'
    - cron: '40 20 17 5 *'
    - cron: '50 13 18 5 *'
    - cron: '40 14 18 5 *'
    - cron: '50 14 18 5 *'
    - cron: '40 15 18 5 *'
    - cron: '50 15 18 5 *'
    - cron: '40 16 18 5 *'
    - cron: '50 18 18 5 *'
    - cron: '40 19 18 5 *'
    - cron: '50 19 21 5 *'
    - cron: '40 20 21 5 *'
    - cron: '50 15 24 5 *'
    - cron: '40 16 24 5 *'
    - cron: '20 18 24 5 *'
    - cron: '10 19 24 5 *'
    - cron: '50 13 25 5 *'
    - cron: '40 14 25 5 *'
    - cron: '50 14 25 5 *'
    - cron: '40 15 25 5 *'
    - cron: '50 15 25 5 *'
    - cron: '40 16 25 5 *'
    - cron: '50 16 25 5 *'
    - cron: '40 17 25 5 *'
    - cron: '20 20 28 5 *'
    - cron: '10 21 28 5 *'
    - cron: '50 14 31 5 *'
    - cron: '40 15 31 5 *'
    - cron: '50 16 31 5 *'
    - cron: '40 17 31 5 *'
    - cron: '20 18 31 5 *'
    - cron: '10 19 31 5 *'
    - cron: '50 18 31 5 *'
    - cron: '40 19 31 5 *'
    - cron: '55 18 31 5 *'
    - cron: '45 19 31 5 *'
    - cron: '50 19 31 5 *'
    - cron: '40 20 31 5 *'
    - cron: '50 14 1 6 *'
    - cron: '40 15 1 6 *'
    - cron: '50 15 1 6 *'
    - cron: '40 16 1 6 *'
    - cron: '50 16 1 6 *'
    - cron: '40 17 1 6 *'
    - cron: '50 19 1 6 *'
    - cron: '40 20 1 6 *'
    - cron: '50 14 7 6 *'
    - cron: '40 15 7 6 *'
    - cron: '50 18 7 6 *'
    - cron: '40 19 7 6 *'
    - cron: '50 19 7 6 *'
    - cron: '40 20 7 6 *'
    - cron: '50 13 8 6 *'
    - cron: '40 14 8 6 *'
    - cron: '50 14 8 6 *'
    - cron: '40 15 8 6 *'
    - cron: '50 14 14 6 *'
    - cron: '40 15 14 6 *'
    - cron: '50 15 14 6 *'
    - cron: '40 16 14 6 *'
    - cron: '50 17 14 6 *'
    - cron: '40 18 14 6 *'
    - cron: '20 18 14 6 *'
    - cron: '10 19 14 6 *'
    - cron: '50 18 14 6 *'
    - cron: '40 19 14 6 *'
    - cron: '50 19 14 6 *'
    - cron: '40 20 14 6 *'
    - cron: '50 14 15 6 *'
    - cron: '40 15 15 6 *'
    - cron: '50 16 15 6 *'
    - cron: '40 17 15 6 *'
    - cron: '50 17 15 6 *'
    - cron: '40 18 15 6 *'
    - cron: '50 18 15 6 *'
    - cron: '40 19 15 6 *'
    - cron: '20 19 15 6 *'
    - cron: '10 20 15 6 *'
    - cron: '50 19 15 6 *'
    - cron: '40 20 15 6 *'
    - cron: '50 14 21 6 *'
    - cron: '40 15 21 6 *'
    - cron: '50 16 21 6 *'
    - cron: '40 17 21 6 *'
    - cron: '50 18 21 6 *'
    - cron: '40 19 21 6 *'
    - cron: '20 19 21 6 *'
    - cron: '10 20 21 6 *'
    - cron: '50 19 21 6 *'
    - cron: '40 20 21 6 *'
    - cron: '25 14 22 6 *'
    - cron: '15 15 22 6 *'
    - cron: '50 14 22 6 *'
    - cron: '40 15 22 6 *'
    - cron: '50 15 22 6 *'
    - cron: '40 16 22 6 *'
    - cron: '50 18 22 6 *'
    - cron: '40 19 22 6 *'
    - cron: '20 19 22 6 *'
    - cron: '10 20 22 6 *'
    - cron: '50 19 25 6 *'
    - cron: '40 20 25 6 *'
    - cron: '20 20 25 6 *'
    - cron: '10 21 25 6 *'
    - cron: '50 13 27 6 *'
    - cron: '40 14 27 6 *'
    - cron: '50 14 28 6 *'
    - cron: '40 15 28 6 *'
    - cron: '50 18 28 6 *'
    - cron: '40 19 28 6 *'
    - cron: '20 19 28 6 *'
    - cron: '10 20 28 6 *'
    - cron: '50 19 28 6 *'
    - cron: '40 20 28 6 *'
    - cron: '20 20 28 6 *'
    - cron: '10 21 28 6 *'
    - cron: '50 18 29 6 *'
    - cron: '40 19 29 6 *'
    - cron: '50 19 29 6 *'
    - cron: '40 20 29 6 *'
    - cron: '50 19 30 6 *'
    - cron: '40 20 30 6 *'
    - cron: '50 19 2 7 *'
    - cron: '40 20 2 7 *'
    - cron: '50 14 5 7 *'
    - cron: '40 15 5 7 *'
    - cron: '50 18 5 7 *'
    - cron: '40 19 5 7 *'
    - cron: '20 19 5 7 *'
    - cron: '10 20 5 7 *'
    - cron: '45 19 5 7 *'
    - cron: '35 20 5 7 *'
    - cron: '50 19 5 7 *'
    - cron: '40 20 5 7 *'
    - cron: '50 18 6 7 *'
    - cron: '40 19 6 7 *'
    - cron: '50 19 6 7 *'
    - cron: '40 20 6 7 *'
    - cron: '50 18 12 7 *'
    - cron: '40 19 12 7 *'
    - cron: '55 18 12 7 *'
    - cron: '45 19 12 7 *'
    - cron: '20 19 12 7 *'
    - cron: '10 20 12 7 *'
    - cron: '50 19 12 7 *'
    - cron: '40 20 12 7 *'
    - cron: '20 20 12 7 *'
    - cron: '10 21 12 7 *'
    - cron: '50 18 19 7 *'
    - cron: '40 19 19 7 *'
    - cron: '50 19 19 7 *'
    - cron: '40 20 19 7 *'
    - cron: '50 18 20 7 *'
    - cron: '40 19 20 7 *'
    - cron: '20 19 20 7 *'
    - cron: '10 20 20 7 *'
    - cron: '50 19 20 7 *'
    - cron: '40 20 20 7 *'
    - cron: '50 18 21 7 *'
    - cron: '40 19 21 7 *'
    - cron: '50 19 21 7 *'
    - cron: '40 20 21 7 *'
    - cron: '20 20 23 7 *'
    - cron: '10 21 23 7 *'
    - cron: '50 18 26 7 *'
    - cron: '40 19 26 7 *'
    - cron: '20 19 26 7 *'
    - cron: '10 20 26 7 *'
    - cron: '50 19 26 7 *'
    - cron: '40 20 26 7 *'
    - cron: '50 19 27 7 *'
    - cron: '40 20 27 7 *'
    - cron: '50 14 2 8 *'
    - cron: '40 15 2 8 *'
    - cron: '50 18 2 8 *'
    - cron: '40 19 2 8 *'
    - cron: '20 19 2 8 *'
    - cron: '10 20 2 8 *'
    - cron: '50 19 2 8 *'
    - cron: '40 20 2 8 *'
    - cron: '20 20 2 8 *'
    - cron: '10 21 2 8 *'
    - cron: '50 19 3 8 *'
    - cron: '40 20 3 8 *'
    - cron: '50 18 9 8 *'
    - cron: '40 19 9 8 *'
    - cron: '50 19 9 8 *'
    - cron: '40 20 9 8 *'
    - cron: '50 18 10 8 *'
    - cron: '40 19 10 8 *'
    - cron: '20 19 10 8 *'
    - cron: '10 20 10 8 *'
    - cron: '50 19 10 8 *'
    - cron: '40 20 10 8 *'
    - cron: '50 19 11 8 *'
    - cron: '40 20 11 8 *'
    - cron: '50 14 16 8 *'
    - cron: '40 15 16 8 *'
    - cron: '50 18 16 8 *'
    - cron: '40 19 16 8 *'
    - cron: '20 19 16 8 *'
    - cron: '10 20 16 8 *'
    - cron: '50 19 16 8 *'
    - cron: '40 20 16 8 *'
    - cron: '50 18 17 8 *'
    - cron: '40 19 17 8 *'
    - cron: '20 19 17 8 *'
    - cron: '10 20 17 8 *'
    - cron: '50 19 17 8 *'
    - cron: '40 20 17 8 *'
    - cron: '50 19 20 8 *'
    - cron: '40 20 20 8 *'
    - cron: '50 19 22 8 *'
    - cron: '40 20 22 8 *'
    - cron: '50 18 23 8 *'
    - cron: '40 19 23 8 *'
    - cron: '20 19 23 8 *'
    - cron: '10 20 23 8 *'
    - cron: '50 19 23 8 *'
    - cron: '40 20 23 8 *'
    - cron: '20 20 23 8 *'
    - cron: '10 21 23 8 *'
    - cron: '50 18 24 8 *'
    - cron: '40 19 24 8 *'
    - cron: '50 19 24 8 *'
    - cron: '40 20 24 8 *'
    - cron: '50 14 30 8 *'
    - cron: '40 15 30 8 *'
    - cron: '50 18 30 8 *'
    - cron: '40 19 30 8 *'
    - cron: '20 19 30 8 *'
    - cron: '10 20 30 8 *'
    - cron: '50 19 30 8 *'
    - cron: '40 20 30 8 *'
    - cron: '50 18 31 8 *'
    - cron: '40 19 31 8 *'
    - cron: '20 19 31 8 *'
    - cron: '10 20 31 8 *'
    - cron: '50 19 31 8 *'
    - cron: '40 20 31 8 *'

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        python-version: [3.12]

    steps:
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}
    - name: Set git config
      run: |
        git config --global user.name "mokekuma-git"
        git config --global user.email "mokekuma.git@gmail.com"
    - name: git checkout
      uses: actions/checkout@v4
      with:
        ref: main
    - name: Install Python dependencies
      uses: py-actions/py-dependency-install@v4
      with:
        path: "requirements.txt"
    - name: Update matches csv
      run: |
        DATE=`TZ=Asia/Tokyo date +'%m/%d %H:%M'`
        bash scripts/call_update_csv.sh github.event.schedule
        if (git diff --shortstat | grep '[0-9]'); then \
          git add .; \
          git commit -m "Make new csv (append games on $DATE)"; \
          git push origin HEAD; \
        fi
